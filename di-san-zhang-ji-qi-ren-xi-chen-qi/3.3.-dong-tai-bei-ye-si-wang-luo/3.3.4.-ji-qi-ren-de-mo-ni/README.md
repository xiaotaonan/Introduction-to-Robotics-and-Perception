# 3.3.4. 机器人的模拟

> 模拟作为采样，再次！

然后，机器人的模拟相当于从与机器人相关的 DBN 中进行祖先采样，即用测量 CPT 增强的受控马尔可夫链。在这种情况下，一个拓扑排序相当明显，要从中采样的模拟算法也是如此$$P(X_{1:n},Z_{1:n}|A_{1:n})$$：

* 首先，分配$$k \leftarrow 1$$  ，并从 中采样初始状态$$x_1 P(X_1)$$，先于状态。我们写 $ $$x_1 \sim P(X_1)$$  $
* 接下来，通过从传感器模型 $ $$z_k \sim P(Z_k|X_k=x_k)$$  $ 中采样来模拟传感器读数
* 最后，通过对下一个状态$$x_{k+1}$$  进行采样来模拟 （given） 动作$$a_k$$  的效果： $ $$x_{k+1} \sim P(X_{k+1}|X_k=s_k,A_k=a_k).$$  $
* 增加  $$k \leftarrow k+1$$并返回到步骤2  。

请注意，此算法对于具有此动作/传感结构的所有机器人模型都是通用的。
