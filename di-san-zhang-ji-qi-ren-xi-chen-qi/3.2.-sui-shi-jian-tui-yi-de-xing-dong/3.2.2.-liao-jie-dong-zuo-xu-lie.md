# 3.2.2. 了解动作序列

> 从 1 到 多个动作。

我们如何使用上述内容来预测执行多个作时会发生什么？形式上，假设我们应用一系列动作$$a_1,a_2 \cdots a_k$$，并且我们希望计算与结果状态$$X_{k+1}$$相关的概率分布。下面，我们通过应用总概率定律来实现这一点。

总概率定律提供了一种通过考虑事件可能发生的所有不同方式来计算事件概率的便捷方法。假设我们有一组事件$$B=\{B_1,\dots,B_n\}$$，$$B_i \cap B_j= \empty$$当$$i \neq j$$和 with 时，即$$\cup B_i = \Omega$$\
事件集$$B$$形成样本空间的分区。为了计算事件$$A$$的概率，总概率定律由下式给出

$$P(A)=\sum_i P(A|B_i)P(B_i)$$ （公式3.1）

我们只是将每个事件$$P(A|B_i)B_i$$的条件概率相加，由事件$$B_i$$的概率加权。

我们可以使用总概率定律，通过调节时间步$$k$$的可能状态来计算机器人在时间步$$k+1$$中处于状态$$x_{k+1}$$的概率：

$$P(X_{k+1}=x_{k+1})=\sum_{x_k} P(X_{k+1}=x_{k+1}|X_k=x_k)P(X_k=x_k)$$ （公式3.2）

现在，将上述方程中的每个项都条件为动作序列$$a_1 \cdots a_k$$，我们得到

$$P(X_{k+1}|a_1 \cdots a_k)=\sum_{xk} P(X_{k+1}|X_k,a_1 \cdots a_k)P(X_k|a_1 \cdots a_k)$$（公式3.3）

其中，为简洁起见，我们省略了对$$X_k$$和$$X_{k+1}$$的值的显式赋值。

这个表达式可能看起来很复杂，但可以通过做以下观察来简化：如果我们知道机器人在时间步$$k$$处于非特定状态$$x_k$$，那么下一个状态将只取决于在时间步$$k$$执行的动作 ;之前执行的动作不会影响我们对$$X_{k+1}$$的信念。例如，如果机器人在知道它在时间步$$k$$长时在客厅中，但执行动作向下移动，那么将机器人带到客厅的动作顺序（即动作$$a_1 \cdots a_{k-1}$$）不会影响我们对机器人是否会到达走廊的信念。在数学上，我们可以将这种关系写成如下：

$$P(X_{k+1}|X_k,a_1 \cdots a_k)=P(X_{k+1}|X_k,a_k)$$（公式3.4）

我们也可以简化术语$$P(X_k|a_1 \cdots a_k)$$。请注意，在 time step $$k$$执行的作对 time step $$k$$\
的状态没有影响。例如，如果机器人在时间步$$k$$中执行 下移作 ，则此作不会改变机器人在时间$$t$$ 在客厅中的事实。因此，我们有

$$P(X_k|a_1 \cdots a_k)=P(X_k|a_1 \cdots a_{k-1})$$（公式3.5）

应用这两个简化，我们得到所需概率分布$$P(X_{k+1}|a_1 \cdots a_k)$$的最终形式：

$$P(X_{k+1}|a_1 \cdots a_k) = \sum_{x_k} P(X_{k+1}|X_k,a_k)P(X_k|a_1 \cdots a_{k-1})$$（公式 3.6）

我们可以将这个表达式中的术语视为如下：

* $$P(X_k|a_1 \cdots a_{k-1})$$是当前状态  $$X_k$$的先例;
* $$P(X_{k+1}|X_k,a_k)$$是运动模型;
* $$P(X_{k+1}|a_1 \cdots a_k)$$是下一个状态  $$X_{k+1}$$的后验。

对于初始状态，尚未应用任何作，并且 prior 只是 initial state$$X_1$$上的先验$$P(X_1)$$。然后 Afteriors at 时间步$$k=2$$可以计算为:

$$P(X_2|a_1)=\sum_{x_1}P(X_2|X_1,a_1)P(X_1)$$（公式3.7）

然后，这个后验$$P(X_2|a_1)$$在下一步中成为先验，依此类推......这是递归计算概率分布的一个例子，我们将多次遇到这种方案。
