# 4.4.4. 蒙特卡洛定位

> 使用粒子滤波进行定位被称为蒙特卡洛定位。

上述空间有限元素离散化非常昂贵，大部分内存和计算用于计算接近零的概率。虽然有一些方法可以处理这个问题，但切换到基于采样的表示方式在计算上能获得更大的效益。而且，正如我们将看到的，它也引出了一个非常简单的算法。贝叶斯滤波的基于采样的实现被称为粒子滤波。下面我们在二维环境中讨论它，但实际上它相当通用。当用于机器人定位时，这种技术被称为[蒙特卡洛定位或 MCL\[Dellaert 等人，1999](https://www.ri.cmu.edu/publications/monte-carlo-localization-for-mobile-robots/)]。

粒子滤波器通过（a）用一个样本集来代替显式的概率分布，以及（b）用蒙特卡洛近似来逼近贝叶斯滤波器中的预测步骤，从而近似贝叶斯滤波器。我们递归地假设我们能够获得关于先前状态$$x_{k-1}$$的滤波密度的基于样本的近似，作为一个带权重的样本集：

$$
\begin{equation}
p(X_{k-1}|\mathcal{Z}^{k-1},\mathcal{U}^{k-1}) \approx \{(x_{k-1}^{(s)}, w_{k-1}^{(s)})\}_{s =1 \dots S}
\end{equation}
$$

其中$$x_{k-1}^{(s)}$$是$$s^{th}$$样本，$$w_{k-1}^{(s)}$$是其权重。

然后我们分两步实现该过程，称为预测步骤和更新步骤。

* 在预测步骤中，我们通过从以下运动模型密度混合分布中抽取$$S$$  个无权重的样本来近似预测分布$$p(x_{k}|\mathcal{Z}^{k-1},\mathcal{U}^{k})$$,$$\begin{equation} { x_k^{(t)} }{t = 1 \dots S} \sim \sum_s w{k-1}^{(s)} P(x_{k}|x_{k-1}^{(s)},u_{k-1})P(x_{k-1}^{(s)}|\mathcal{Z}^{k-1},\mathcal{U}^{k-1}). \end{equation}$$

$$
\begin{equation} { x_k^{(t)} }{t = 1 \dots S} \sim \sum_s w{k-1}^{(s)} P(x_{k}|x_{k-1}^{(s)},u_{k-1})P(x_{k-1}^{(s)}|\mathcal{Z}^{k-1},\mathcal{U}^{k-1}). \end{equation}
$$

* 在更新步骤中，测量值被用来将预测密度转换为滤波分布的加权样本近似，通过用测量值$$z_k$$  给定的$$x_k^{(t)}$$  的似然性对每个无权重的样本进行加权：

$$
\begin{equation} p(X_{k}|\mathcal{Z}^{k},\mathcal{U}^{k}) \approx {(x_k^{(t)}, L(x_k^{(t)};z_{k}))}{t = 1 \dots S}. \end{equation}
$$

&#x20;我们用第一测量值$$z_1$$给定的先验的$$S$$样本集初始化算法，并按似然性加权：&#x20;

$$
\begin{equation} P(X_1|\mathcal{Z}^1={z_1}, \mathcal{U}^1={}) \approx {(x_1^{(t)}, L(x_1^{(t)};z_1))}{t = 1 \dots S}~\text{with}~x_1^{(t)}\sim p(X_1) \end{equation}
$$

在上述的“原味”粒子滤波器中，样本数量随时间保持不变，但存在变种可以随时间密度复杂性或可用计算资源调整样本数量。以这种方式使用时，粒子滤波器可以作为“即时”算法。

接下来我们将更详细地描述预测和更新步骤，并使用我们的仓库场景来说明该算法。
